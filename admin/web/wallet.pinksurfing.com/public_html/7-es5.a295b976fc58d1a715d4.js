function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=new Array(t);r<t;r++)o[r]=e[r];return o}function _iterableToArrayLimit(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],o=!0,n=!1,c=void 0;try{for(var a,i=e[Symbol.iterator]();!(o=(a=i.next()).done)&&(r.push(a.value),!t||r.length!==t);o=!0);}catch(l){n=!0,c=l}finally{try{o||null==i.return||i.return()}finally{if(n)throw c}}return r}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{vYsr:function(e,t,r){"use strict";r.r(t),r.d(t,"BuySellModule",(function(){return S}));var o=r("ofXK"),n=r("tyNb"),c=r("mrSG"),a=r("3Pt+"),i=r("EVdn"),l=r("fXoL"),s=r("qc5V"),u=r("5eHb");function b(e,t){if(1&e&&(l.Tb(0,"option",41),l.Gc(1),l.Sb()),2&e){var r=t.$implicit;l.oc("value",r.symbol),l.Ab(1),l.Ic(" ",r.symbol,"")}}function p(e,t){if(1&e&&(l.Tb(0,"p",42),l.Gc(1),l.Sb()),2&e){var r=l.hc();l.Ab(1),l.Hc(r.buyErrorMessage)}}function y(e,t){if(1&e&&(l.Tb(0,"option",41),l.Gc(1),l.Sb()),2&e){var r=t.$implicit;l.oc("value",r.symbol),l.Ab(1),l.Hc(r.symbol)}}function f(e,t){if(1&e&&(l.Tb(0,"p",42),l.Gc(1),l.Sb()),2&e){var r=l.hc();l.Ab(1),l.Hc(r.sellErrorMessage)}}var d,m,g,h=function(e){return{"not-valid-box":e}},v=[{path:"",component:(d=function(){function e(t,r,o,n){_classCallCheck(this,e),this.apiService=t,this.router=r,this.toastr=o,this.fb=n,this.buyForm=this.fb.group({crypto:["BTC",a.t.required],price:["",a.t.required]}),this.sellForm=this.fb.group({crypto:["BTC",a.t.required],price:["",a.t.required]}),this.cryptoCurrencyList={charts7d:[],cryptos:[],latestmarketData:[],marketData:[],status:""},this.cryptoCurrencyListForSell={walletInfo:[],totalAssetBalance:0,crypto:[]},this.currentCryptoChoosed={address:"",circulating_supply:0,cmc_rank:0,date_added:"",id:0,is_active:0,is_fiat:0,last_updated:"",max_supply:0,name:"",num_market_pairs:0,platform:null,cryptoWalletprice:0,quote:{bizx:{last_updated:"",market_cap:0,percent_change_1h:0,percent_change_7d:0,percent_change_24h:0,price:0,volume_24h:0}},slug:"",symbol:"",tags:[],total_supply:0,url:""},this.convertedValue=0,this.buySubmitted=!1,this.sellSubmitted=!1,this.buyErrorFlag=!1,this.sellErrorFlag=!1,this.currentCryptoChoosed2={},this.currencySymbolInfo={},this.convertFeeInfo={}}return _createClass(e,[{key:"ngOnInit",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.apiService.userDetails().subscribe((function(e){r.userDetails=e,console.log(r.userDetails),console.log(r.userDetails.userInfo.country)})),e.next=3,this.apiService.getWalletBalance().subscribe((function(e){"success"===e.status&&(r.cryptoCurrencyListForSell=e,r.apiService.getCryptoList().subscribe((function(e){if("success!"===e.status){for(var t=0;t<e.marketData.length;t++)e.marketData[t].url=e.cryptos[t].url,null!=e.cryptos[t].qrcode&&(e.marketData[t].qrcode=e.cryptos[t].qrcode,e.marketData[t].address=e.cryptos[t].address,r.address=e.cryptos[t].address),e.marketData[t].cryptoWalletprice=r.cryptoCurrencyListForSell.crypto[t].wallet;r.cryptoCurrencyList=e,r.getFiatBalance(),void 0!==localStorage.getItem("amount")&&null!==localStorage.getItem("amount")||void 0!==localStorage.getItem("crypto")&&null!==localStorage.getItem("crypto")?(r.buyForm.get("crypto").setValue(localStorage.getItem("crypto")),r.getCorrespondingCrypto(localStorage.getItem("crypto").toUpperCase()),r.buyForm.get("price").setValue(localStorage.getItem("amount"))):r.getCorrespondingCrypto("BTC")}})))}));case 3:i(".amount-percentage").click((function(){i(".amount-percentage").css({background:"transparent",color:"#3e37cc",border:"1px solid #3e37cc"}),i(this).css({background:"#3e37cc",color:"#fff",border:"1px solid #3e37cc"})})),t=this,i('[name="buyFormPrice"]').on("keyup",(function(){null!=t.f.price.value?t.f.price.value.toString().length>0&&t.convertPrice(t.f.price.value):t.convertedValue=0})),i('[name="sellFormPrice"]').on("keyup",(function(){null!=t.m.price.value?t.m.price.value.toString().length>0&&t.convertPriceForSell(t.m.price.value):t.convertedValue=0}));case 6:case"end":return e.stop()}}),e,this)})))}},{key:"buyCrypto",value:function(){var e=this;if(this.buyErrorFlag=!1,this.buySubmitted=!0,!this.buyForm.invalid){var t={sourceAmount:this.f.price.value,currency:this.f.crypto.value,address:this.currentCryptoChoosed.address,paymentMethod:"debit-card",country:this.userDetails.userInfo.countrycode};console.log("finalData",t),this.apiService.buyCrypto(t).subscribe((function(t){console.log(t.result.redirectUrl),e.Url=t.result.redirectUrl,window.open(e.Url,"_blank")}),(function(t){e.toastr.error(t,"Invalid"),e.buyErrorFlag=!0,e.buyErrorMessage=t}))}}},{key:"sellCrypto",value:function(){var e=this;this.sellErrorFlag=!1,this.sellSubmitted=!0,this.sellForm.invalid||this.apiService.sellCrypto({amount:this.m.price.value,crypto:this.m.crypto.value}).subscribe((function(t){"success"===t.status&&e.toastr.success(t.message,"Success")}),(function(t){e.toastr.error(t,"Invalid"),e.sellErrorFlag=!0,e.sellErrorMessage=t}))}},{key:"getCorrespondingCrypto",value:function(e){var t=this;console.log(e),this.currentCryptoChoosed=this.cryptoCurrencyList.marketData.find((function(r){if(r.symbol===e)return r;console.log(r),console.log(t.currentCryptoChoosed)})),this.currentCryptoChoosed2=this.cryptoCurrencyList.latestmarketData;for(var r=0,o=Object.entries(this.currentCryptoChoosed2);r<o.length;r++){var n=_slicedToArray(o[r],2),c=n[0],a=n[1];c===e&&(this.currencySymbolInfo=c,this.currencyPriceInfo=a.price,console.log("FAST-CurrencyPriceInfo"+JSON.stringify(this.currencyPriceInfo)),console.log(this.currencyPriceInfo))}null!=this.currentCryptoChoosed&&(this.buyForm.controls.crypto.setValue(this.currentCryptoChoosed.symbol),this.sellForm.controls.crypto.setValue(this.currentCryptoChoosed.symbol),this.convertPrice(this.f.price.value))}},{key:"getCorrespondingCryptoForReceive",value:function(e){console.log(e),this.currentCryptoChoosed=this.cryptoCurrencyList.marketData.find((function(t){if(t.symbol===e)return t})),console.log(this.currentCryptoChoosed)}},{key:"convertPrice",value:function(e){var t=this;""==e&&(e="0"),this.apiService.convertPrice({amount:e,from:"USD",to:this.f.crypto.value}).subscribe((function(e){"success"===e.status&&(t.convertedValue=e.buyFinalValue,console.log(t.convertedValue))}))}},{key:"convertPriceForSell",value:function(e){var t=this;this.apiService.convertPrice({amount:e,from:this.m.crypto.value,to:"bizx "}).subscribe((function(e){"success"===e.status&&(t.convertedValue=e.sellFinalValue,console.log(t.convertedValue))}))}},{key:"selectCrypto",value:function(e){var t=this;console.log(e),this.cryptoCurrencyList.cryptos.forEach((function(r){r.name===e&&(t.cryptoImg=r.url)})),this.getCorrespondingCrypto(e),this.getFiatBalance()}},{key:"selectCryptoForReceive",value:function(e){var t=this;console.log(e),this.cryptoCurrencyList.cryptos.forEach((function(r){r.name===e&&(t.cryptoImg=r.url)})),this.getCorrespondingCryptoForReceive(e),this.getFiatBalance()}},{key:"getFiatBalance",value:function(){var e=this;this.apiService.getFiatBalance().subscribe((function(t){console.log(t),"success"===t.status&&(e.fiatBalance=t.fiatBalance)}))}},{key:"percentageBuyCrypto",value:function(e){0!==this.currentCryptoChoosed.cryptoWalletprice&&(this.sellForm.get("price").setValue((this.currentCryptoChoosed.cryptoWalletprice/100*e).toFixed(3)),this.convertPriceForSell(this.m.price.value))}},{key:"buyTabClick",value:function(){this.convertedValue=0,this.getCorrespondingCrypto("BTC")}},{key:"sellTabClick",value:function(){this.convertedValue=0,this.getCorrespondingCrypto("BTC")}},{key:"ngOnDestroy",value:function(){localStorage.removeItem("amount"),localStorage.removeItem("crypto")}},{key:"f",get:function(){return this.buyForm.controls}},{key:"m",get:function(){return this.sellForm.controls}}]),e}(),d.\u0275fac=function(e){return new(e||d)(l.Nb(s.a),l.Nb(n.d),l.Nb(u.b),l.Nb(a.d))},d.\u0275cmp=l.Hb({type:d,selectors:[["app-buy-sell"]],decls:96,vars:36,consts:[["id","buysell",1,"",2,"margin-top","4.5%"],[1,"container"],[1,"heading","text-center","font-fam-titilum-bold","fs-36","pb-4"],[1,"card","bg-white","rounded"],["id","register_tab","role","tablist",1,"nav","nav-pills","mb-3"],["role","presentation",1,"nav-item"],["id","pills-buy-tab","data-toggle","pill","href","#pills-buy","role","tab","aria-controls","pills-buy","aria-selected","true",1,"nav-link","font-fam-titilum-bold","fs-21","active",3,"click"],["id","register_tabContent",1,"tab-content"],["id","pills-buy","role","tabpanel","aria-labelledby","pills-buy-tab",1,"tab-pane","fade","show","p-5","active"],["action","",3,"formGroup","ngSubmit"],[1,"text-center"],[1,"amount"],[1,"fs-14"],["type","text","formControlName","price","name","buyFormPrice","placeholder","00000",1,"m-auto","heading","font-fam-lat-regular",2,"font-size","56px",3,"ngClass"],[1,"mb-0","font-fam-lat-regular","fs-24"],[1,"text-right","mt-5","font-fam-lat-regular","fs-14"],[1,"buy-border","d-flex","align-center","justify-between","border","p-4"],[1,"font-fam-lat-regular","fs-14"],["height","30","width","30 ","alt","",1,"ml-5",3,"src"],["name","","formControlName","crypto","id","",1,"ml-4","border-0","col","text-gray-2","font-fam-lat-regular","fs-14",3,"change"],[3,"value",4,"ngFor","ngForOf"],[1,"buy-border","d-flex","align-center","justify-between","border","border-top-0","p-4"],["type","text","disabled","","name","","id","",1,"form-control",3,"value"],[1,"mb-0","text-gray-2","font-fam-lat-regular","fs-14"],[1,"ml-4","mb-0","text-gray-2","font-fam-lat-regular","fs-14"],["class","error-message float-left",4,"ngIf"],["type","submit",1,"bg-primary-color","text-center","text-white","border-0","rounded","p-4","mb-4","w-100","mt-4","font-fam-titilum-bold","fs-21"],["id","pills-sell","role","tabpanel","aria-labelledby","pills-sell-tab",1,"tab-pane","p-5","fade"],[1,"d-flex","mb-4"],["type","text","formControlName","price","name","sellFormPrice","placeholder","Amount",1,"border","col","p-30","font-fam-lat-regular","fs-14",3,"ngClass"],[1,"buy-border","d-flex","align-center","justify-between","border","p-2"],["name","","id","","formControlName","crypto",1,"ml-4","border-0","col","text-gray-2","font-fam-lat-regular","fs-14",3,"change"],[1,"d-flex","justify-between","mb-5","d-flex-sm"],[1,"amount-percentage",3,"click"],[1,"text-gray-2","font-fam-lat-regular","fs-12"],[1,"primary-color-bl"],[1,"fs-14","mb-0","font-fam-lat-regular","fs-14"],[1,"d-flex"],["type","text","disabled","","placeholder","Amount",1,"border","col","p-30","font-fam-lat-regular","fs-14",3,"value"],["name","","id","",1,"border","border-left-0","col-3","text-gray-2","font-fam-lat-regular","fs-14"],["value",""],[3,"value"],[1,"error-message","float-left"]],template:function(e,t){1&e&&(l.Tb(0,"section",0),l.Tb(1,"div",1),l.Tb(2,"p",2),l.Gc(3,"Buy and Sell Cryptocurrency"),l.Sb(),l.Tb(4,"div",3),l.Tb(5,"ul",4),l.Tb(6,"li",5),l.Tb(7,"a",6),l.fc("click",(function(){return t.buyTabClick()})),l.Gc(8,"Buy"),l.Sb(),l.Sb(),l.Sb(),l.Tb(9,"div",7),l.Tb(10,"div",8),l.Tb(11,"form",9),l.fc("ngSubmit",(function(){return t.buyCrypto()})),l.Tb(12,"div",10),l.Tb(13,"div",11),l.Tb(14,"span",12),l.Tb(15,"b"),l.Gc(16,"USD "),l.Sb(),l.Sb(),l.Ob(17,"input",13),l.Sb(),l.Tb(18,"p",14),l.Gc(19),l.ic(20,"number"),l.Sb(),l.Tb(21,"p",15),l.Gc(22),l.ic(23,"number"),l.Tb(24,"span",12),l.Tb(25,"b"),l.Gc(26,"USD "),l.Sb(),l.Sb(),l.Sb(),l.Tb(27,"div",16),l.Tb(28,"b",17),l.Gc(29,"Buy"),l.Sb(),l.Ob(30,"img",18),l.Tb(31,"select",19),l.fc("change",(function(){return t.selectCrypto(t.f.crypto.value)})),l.Ec(32,b,2,2,"option",20),l.Sb(),l.Sb(),l.Tb(33,"div",21),l.Tb(34,"b",17),l.Gc(35,"Address"),l.Sb(),l.Gc(36," \xa0\xa0 "),l.Ob(37,"input",22),l.Sb(),l.Tb(38,"div",21),l.Tb(39,"b",17),l.Gc(40,"Pay with"),l.Sb(),l.Tb(41,"p",23),l.Gc(42,"Cash Wallet"),l.Sb(),l.Tb(43,"p",24),l.Gc(44),l.ic(45,"number"),l.Sb(),l.Sb(),l.Ec(46,p,2,1,"p",25),l.Tb(47,"button",26),l.Gc(48,"Buy"),l.Sb(),l.Sb(),l.Sb(),l.Sb(),l.Tb(49,"div",27),l.Tb(50,"p",17),l.Tb(51,"b"),l.Gc(52,"I want to sell"),l.Sb(),l.Sb(),l.Tb(53,"form",9),l.fc("ngSubmit",(function(){return t.sellCrypto()})),l.Tb(54,"div",28),l.Ob(55,"input",29),l.Tb(56,"div",30),l.Ob(57,"img",18),l.Tb(58,"select",31),l.fc("change",(function(){return t.selectCrypto(t.m.crypto.value)})),l.Ec(59,y,2,2,"option",20),l.Sb(),l.Sb(),l.Sb(),l.Tb(60,"div",32),l.Tb(61,"div"),l.Tb(62,"p"),l.Tb(63,"span",33),l.fc("click",(function(){return t.percentageBuyCrypto("25")})),l.Gc(64,"25%"),l.Sb(),l.Gc(65,"\xa0 "),l.Tb(66,"span",33),l.fc("click",(function(){return t.percentageBuyCrypto("50")})),l.Gc(67,"50%"),l.Sb(),l.Gc(68,"\xa0 "),l.Tb(69,"span",33),l.fc("click",(function(){return t.percentageBuyCrypto("75")})),l.Gc(70,"75%"),l.Sb(),l.Gc(71,"\xa0 "),l.Tb(72,"span",33),l.fc("click",(function(){return t.percentageBuyCrypto("100")})),l.Gc(73,"100%"),l.Sb(),l.Sb(),l.Tb(74,"small",34),l.Gc(75,"Available balance: "),l.Tb(76,"span",35),l.Gc(77),l.Sb(),l.Sb(),l.Sb(),l.Tb(78,"p",36),l.Gc(79),l.ic(80,"number"),l.Tb(81,"span",12),l.Tb(82,"b"),l.Gc(83,"USD "),l.Sb(),l.Sb(),l.Sb(),l.Sb(),l.Tb(84,"p",17),l.Tb(85,"b"),l.Gc(86,"You will receive"),l.Sb(),l.Sb(),l.Tb(87,"div",37),l.Ob(88,"input",38),l.ic(89,"number"),l.Tb(90,"select",39),l.Tb(91,"option",40),l.Gc(92,"USD "),l.Sb(),l.Sb(),l.Sb(),l.Ec(93,f,2,1,"p",25),l.Tb(94,"button",26),l.Gc(95,"Sell"),l.Sb(),l.Sb(),l.Sb(),l.Sb(),l.Sb(),l.Sb(),l.Sb()),2&e&&(l.Ab(11),l.nc("formGroup",t.buyForm),l.Ab(6),l.nc("ngClass",l.rc(32,h,t.buySubmitted&&t.f.price.errors)),l.Ab(2),l.Jc("~ ",l.kc(20,21,t.convertedValue,"1.0-5")," ",t.currentCryptoChoosed.symbol,""),l.Ab(3),l.Jc("Current Price: 1 ",t.currentCryptoChoosed.symbol," = ",l.jc(23,24,t.currencyPriceInfo)," "),l.Ab(8),l.oc("src",t.currentCryptoChoosed.url,l.zc),l.Ab(2),l.nc("ngForOf",t.cryptoCurrencyList.marketData),l.Ab(5),l.oc("value",t.currentCryptoChoosed.address),l.Ab(7),l.Ic("",l.jc(45,26,t.fiatBalance)," USD "),l.Ab(2),l.nc("ngIf",t.buyErrorFlag),l.Ab(7),l.nc("formGroup",t.sellForm),l.Ab(2),l.nc("ngClass",l.rc(34,h,t.sellSubmitted&&t.m.price.errors)),l.Ab(2),l.oc("src",t.currentCryptoChoosed.url,l.zc),l.Ab(2),l.nc("ngForOf",t.cryptoCurrencyList.marketData),l.Ab(18),l.Jc("",t.currentCryptoChoosed.cryptoWalletprice," ",t.currentCryptoChoosed.symbol,""),l.Ab(2),l.Jc("Current Price: 1 ",t.currencySymbolInfo," = ",l.jc(80,28,t.currencyPriceInfo)," "),l.Ab(9),l.oc("value",l.jc(89,30,t.convertedValue)),l.Ab(5),l.nc("ngIf",t.sellErrorFlag))},directives:[a.v,a.l,a.f,a.c,a.k,a.e,o.l,a.s,o.m,o.n,a.o,a.u],pipes:[o.e],styles:["[_nghost-%COMP%]{font-size:1.6rem;line-height:1.4;font-weight:400;box-sizing:border-box}span[_ngcontent-%COMP%]{cursor:pointer}input[_ngcontent-%COMP%]{border-top-left-radius:5px;border-bottom-left-radius:5px}input[name=buyFormPrice][_ngcontent-%COMP%]{width:398px!important;text-align:center}select[_ngcontent-%COMP%]{border-top-right-radius:5px;border-bottom-right-radius:5px}.primary-color-bl[_ngcontent-%COMP%]{color:var(--primary-color)}"]}),d)}],C=((g=function e(){_classCallCheck(this,e)}).\u0275mod=l.Lb({type:g}),g.\u0275inj=l.Kb({factory:function(e){return new(e||g)},imports:[[n.g.forChild(v)],n.g]}),g),S=((m=function e(){_classCallCheck(this,e)}).\u0275mod=l.Lb({type:m}),m.\u0275inj=l.Kb({factory:function(e){return new(e||m)},imports:[[o.b,C,a.q,a.g]]}),m)}}]);